#ifndef Network_h
#define Network_h

#include <Arduino.h>
#include <ESP8266WebServer.h>
#include <ESP8266mDNS.h>
#include <WiFiClient.h>
#include <WiFiClientSecure.h>
#include <SpotifyArduino.h>
#include <SpotifyArduinoCert.h>
#include <ArduinoJson.h>

#include "creds.h"

class SpotifyNetwork {
  public:
    SpotifyNetwork();
    char scope[] = "user-read-playback-state%20user-modify-playback-state";

    

    void clearSerial();
    bool connectToWiFi();
    void handleCallback();
    void handleNotFound();
    void serverSetup();
    void networkLoop();
    void login();

  private:
    String ssid;
    String passwd;
    char callbackURI[] = "http%3A%2F%2Farduino.local%2Fcallback%2F";
    ESP8266WebServer server(80);
    WiFiClientSecure client;
    SpotifyArduino spotify(client, CLIENT_ID, CLIENT_SECRET);
}


#endif